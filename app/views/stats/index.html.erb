<!-- app/views/stats/index.html.erb -->
<h1 class="text-2xl font-bold mb-6">📊 Statistiques</h1>

<div class="grid grid-cols-2 gap-4 mb-6">
  <div class="bg-blue-100 border border-blue-300 p-4 rounded">
    <p class="text-sm text-blue-800 font-semibold">📅 Ventes aujourd’hui</p>
    <p class="text-lg font-bold">
      <%= @stats[:today_count] %> ventes — <%= number_to_currency(@stats[:today_total]) %>
    </p>
  </div>

  <div class="bg-green-100 border border-green-300 p-4 rounded">
    <p class="text-sm text-green-800 font-semibold">📆 Ventes ce mois-ci</p>
    <p class="text-lg font-bold">
      <%= @stats[:month_count] %> ventes — <%= number_to_currency(@stats[:month_total]) %>
    </p>
  </div>

  <div class="bg-yellow-100 border border-yellow-300 p-4 rounded">
    <p class="text-sm text-yellow-800 font-semibold">💰 Marge totale depuis la mise en place de l'application</p>
    <p class="text-lg font-bold">
      <%= number_to_currency(@stats[:total_marge]) %>
    </p>
  </div>

  <div class="bg-yellow-100 border border-yellow-300 p-4 rounded">
    <p class="text-sm text-yellow-800 font-semibold">📈 Marge totale ce mois-ci</p>
    <p class="text-lg font-bold">
      <%= number_to_currency(@stats[:marge_totale_mois]) %>
    </p>
  </div>

  <div class="bg-purple-100 border border-purple-300 p-4 rounded">
    <p class="text-sm text-purple-800 font-semibold">🛍 Total des ventes depuis la mise en place de l'application</p>
    <p class="text-lg font-bold">
      <%= @stats[:total_ventes] %> ventes — <%= number_to_currency(@stats[:total_ttc]) %>
    </p>
  </div>

  <div class="bg-red-100 border border-red-300 p-4 rounded">
    <p class="text-sm text-red-800 font-semibold">🏷 Produits vendus (top 3)</p>
    <ul class="text-sm font-medium text-red-800 list-disc ml-4">
      <% @stats[:top_produits].each do |produit| %>
        <li><%= produit.nom %> (€<%= produit.total_vendu %>)</li>
      <% end %>
    </ul>
  </div>

  <div class="bg-gray-100 border border-gray-300 p-4 rounded">
    <p class="text-sm text-gray-800 font-semibold">👩‍💼 Déposantes les plus payées (top 3)</p>
    <ul class="text-sm font-medium text-gray-800 list-disc ml-4">
      <% @stats[:top_deposantes].each do |d| %>
        <li><%= d.nom %> (€<%= d.total_verse %>)</li>
      <% end %>
    </ul>
  </div>

  <div class="bg-green-100 border border-green-300 p-4 rounded">
    <p class="text-sm text-green-800 font-semibold">📆 TVA à payer ce mois-ci</p>
    <p class="text-lg font-bold">
      <p>Total TVA à payer : <%= number_to_currency(@stats[:tva_a_payer_totale]) %></p>
    </p>
  </div>
</div>

<%= link_to "↩ Retour", root_path, class: "text-blue-600 hover:underline" %>
