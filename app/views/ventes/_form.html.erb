<div class="max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-md">
  <h2 class="text-2xl font-semibold mb-4"><%= @vente.new_record? ? "Nouvelle vente" : "Modifier la vente" %></h2>

  <%= form_with(model: @vente, local: true) do |form| %>

    <!-- Sélection du client -->
    <div>
      <%= form.label :client_id, "Client", class: "block text-sm font-medium text-gray-700" %>
      <%= form.collection_select :client_id, Client.all, :id, :nom, { prompt: "Sélectionner un client" }, class: "mt-1 block w-full p-2 border border-gray-300 rounded-md" %>
    </div>

    <!-- Sélection des produits -->
    <div class="mt-4">
      <p class="text-sm font-medium text-gray-700">Produits</p>
      <% Produit.all.each do |produit| %>
        <div class="flex items-center space-x-2">
          <%= check_box_tag "vente[produit_ids][]", produit.id, @vente.produits.include?(produit) %>
          <%= label_tag "vente[produit_ids][]", "#{produit.nom} - #{produit.prix} €" %>
        </div>
      <% end %>
    </div>

    <!-- Mode de paiement -->
    <div class="mt-4">
      <%= form.label :mode_paiement, "Mode de paiement", class: "block text-sm font-medium text-gray-700" %>
      <%= form.select :mode_paiement, ["Espèces", "Carte bancaire", "Virement", "Chèque"], {}, class: "mt-1 block w-full p-2 border border-gray-300 rounded-md" %>
    </div>

    <!-- Boutons -->
    <div class="flex justify-end space-x-4 mt-6">
      <%= link_to "Annuler", ventes_path, class: "px-4 py-2 bg-gray-300 text-gray-900 rounded-md hover:bg-gray-400" %>
      <%= form.submit @vente.new_record? ? "Enregistrer" : "Mettre à jour", class: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700" %>
    </div>

  <% end %>
</div>
