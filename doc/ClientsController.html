<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>class ClientsController - RDoc Documentation</title>

  <meta name="keywords" content="ruby,class,ClientsController">

    <meta name="description" content="class ClientsController: ClientsController Contrôleur de gestion des clients, incluant la création, modification, suppression, recherche, export PDF et affichage de la liste a">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<div id="navigation-toggle" role="button" tabindex="0" aria-label="Toggle sidebar" aria-expanded="true" aria-controls="navigation">
  <span aria-hidden="true">&#9776;</span>
</div>


<nav id="navigation" role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search (/) for a class, method, ..." spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
  
  <div id="parent-class-section" class="nav-section">
  <h3>Ancestors</h3>
  <ul><li>ApplicationController</li></ul>
</div>

  
  
  


  <div class="nav-section">
    <h3>Instance Methods</h3>
    <ul class="link-list" role="directory">
      <li ><a href="#method-i-create">create</a></li>
      <li ><a href="#method-i-destroy">destroy</a></li>
      <li ><a href="#method-i-edit">edit</a></li>
      <li ><a href="#method-i-generate_pdf">generate_pdf</a></li>
      <li ><a href="#method-i-index">index</a></li>
      <li ><a href="#method-i-new">new</a></li>
      <li ><a href="#method-i-show">show</a></li>
      <li ><a href="#method-i-update">update</a></li>
    </ul>
  </div>



  <footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.12.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

</nav>

<main role="main" aria-labelledby="class-ClientsController">
  <h1 id="class-ClientsController" class="anchor-link class">
    class ClientsController
  </h1>

  <section class="description">
    
<p><a href="ClientsController.html"><code>ClientsController</code></a> Contrôleur de gestion des clients, incluant la création, modification, suppression, recherche, export PDF et affichage de la liste avec pagination.</p>

  </section>

  <section id="5Buntitled-5D" class="documentation-section anchor-link">





     <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-create" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-i-create" title="Link to this method">
                <span class="method-name">create</span>
                <span class="method-args">()</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="create-source">
            <pre><span class="ruby-comment"># File app/controllers/clients_controller.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create</span>
  <span class="ruby-ivar">@client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">client_params</span>)
  <span class="ruby-ivar">@retour</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:retour</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@client</span>.<span class="ruby-identifier">save</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@retour</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;ventes&quot;</span>
      <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">new_vente_path</span>(<span class="ruby-value">client_nom:</span> <span class="ruby-ivar">@client</span>.<span class="ruby-identifier">nom</span>), <span class="ruby-value">notice:</span> <span class="ruby-string">&quot;Client créée avec succès.&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">clients_path</span>, <span class="ruby-value">notice:</span> <span class="ruby-string">&quot;Client ajoutée.&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>POST /clients Crée un nouveau client. Redirige vers les ventes si l’appel vient de l’encaissement.</p>
        </div>


      </div>

      <div id="method-i-destroy" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-i-destroy" title="Link to this method">
                <span class="method-name">destroy</span>
                <span class="method-args">()</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="destroy-source">
            <pre><span class="ruby-comment"># File app/controllers/clients_controller.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">destroy</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@client</span>.<span class="ruby-identifier">destroy</span>
    <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice</span>] = <span class="ruby-string">&quot;Client supprimé avec succès.&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">flash</span>[<span class="ruby-value">:alert</span>] = <span class="ruby-string">&quot;Impossible de supprimer le client.&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">clients_path</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>DELETE /clients/:id Supprime un client s’il n’y a pas de contrainte bloquante.</p>
        </div>


      </div>

      <div id="method-i-edit" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-i-edit" title="Link to this method">
                <span class="method-name">edit</span>
                <span class="method-args">()</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="edit-source">
            <pre><span class="ruby-comment"># File app/controllers/clients_controller.rb, line 59</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">edit</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>GET /clients/:id/edit Affiche le formulaire d’édition du client.</p>
        </div>


      </div>

      <div id="method-i-generate_pdf" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-i-generate_pdf" title="Link to this method">
                <span class="method-name">generate_pdf</span>
                <span class="method-args">()</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="generate_pdf-source">
            <pre><span class="ruby-comment"># File app/controllers/clients_controller.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generate_pdf</span>
  <span class="ruby-ivar">@client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
  <span class="ruby-identifier">produits</span> = <span class="ruby-ivar">@client</span>.<span class="ruby-identifier">produits</span>.<span class="ruby-identifier">includes</span>(<span class="ruby-value">ventes:</span> [ <span class="ruby-value">:versements</span> ])

  <span class="ruby-identifier">pdf</span> = <span class="ruby-constant">Prawn</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">page_size:</span> <span class="ruby-string">&quot;A4&quot;</span>)
  <span class="ruby-identifier">font_path</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;app/assets/fonts/DejaVuSans.ttf&quot;</span>)
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">font_families</span>.<span class="ruby-identifier">update</span>(<span class="ruby-string">&quot;DejaVuSans&quot;</span> <span class="ruby-operator">=&gt;</span> { <span class="ruby-value">normal:</span> <span class="ruby-identifier">font_path</span> })
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">font</span> <span class="ruby-string">&quot;DejaVuSans&quot;</span>

  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&quot;Récapitulatif des Produits en Dépôt&quot;</span>, <span class="ruby-value">size:</span> <span class="ruby-value">20</span>, <span class="ruby-value">align:</span> <span class="ruby-value">:center</span>
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">move_down</span> <span class="ruby-value">20</span>
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">text</span> <span class="ruby-node">&quot;Nom du client : #{@client.nom} #{@client.prenom}&quot;</span>, <span class="ruby-value">size:</span> <span class="ruby-value">14</span>
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">text</span> <span class="ruby-node">&quot;Email : #{@client.email}&quot;</span>, <span class="ruby-value">size:</span> <span class="ruby-value">12</span>
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">text</span> <span class="ruby-node">&quot;Téléphone : #{@client.telephone}&quot;</span>, <span class="ruby-value">size:</span> <span class="ruby-value">12</span>
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">text</span> <span class="ruby-node">&quot;Date du jour : #{Date.today.strftime(&#39;%d/%m/%Y&#39;)}&quot;</span>, <span class="ruby-value">size:</span> <span class="ruby-value">12</span>
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">move_down</span> <span class="ruby-value">10</span>

  <span class="ruby-identifier">data</span> = [ [ <span class="ruby-string">&quot;ID&quot;</span>, <span class="ruby-string">&quot;Article&quot;</span>, <span class="ruby-string">&quot;Prix demandé&quot;</span>, <span class="ruby-string">&quot;Statut&quot;</span>, <span class="ruby-string">&quot;Date de dépôt&quot;</span>, <span class="ruby-string">&quot;Date de paiement&quot;</span>, <span class="ruby-string">&quot;Reçu&quot;</span> ] ]

  <span class="ruby-identifier">total_verse</span> = <span class="ruby-value">0.0</span>
  <span class="ruby-identifier">total_lignes</span> = <span class="ruby-value">0</span>

  <span class="ruby-identifier">produits</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">produit</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">en_depot?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">ventes</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">ventes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">vente</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">versement</span> = <span class="ruby-identifier">vente</span>.<span class="ruby-identifier">versements</span>.<span class="ruby-identifier">first</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">versement</span>.<span class="ruby-identifier">present?</span>
          <span class="ruby-identifier">numero_recu</span> = <span class="ruby-identifier">versement</span>.<span class="ruby-identifier">numero_recu</span>.<span class="ruby-identifier">presence</span> <span class="ruby-operator">||</span> <span class="ruby-string">&quot;N/A&quot;</span>
          <span class="ruby-identifier">date_versement</span> = <span class="ruby-identifier">versement</span>.<span class="ruby-identifier">created_at</span>&amp;.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%d/%m/%Y&quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-string">&quot;N/A&quot;</span>

          <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">nom</span>, <span class="ruby-node">&quot;#{produit.prix_deposant} €&quot;</span>, <span class="ruby-string">&quot;✔️ Vendu et payé&quot;</span>, <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">date_depot</span>&amp;.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%d/%m/%Y&quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-string">&quot;N/A&quot;</span>, <span class="ruby-identifier">date_versement</span>, <span class="ruby-identifier">numero_recu</span> ]
          <span class="ruby-identifier">total_verse</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">prix_deposant</span>.<span class="ruby-identifier">to_f</span>
          <span class="ruby-identifier">total_lignes</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">nom</span>, <span class="ruby-node">&quot;#{produit.prix_deposant} €&quot;</span>, <span class="ruby-string">&quot;✔️ Vendu (non payé)&quot;</span>, <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">date_depot</span>&amp;.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%d/%m/%Y&quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-string">&quot;N/A&quot;</span>, <span class="ruby-string">&quot;N/A&quot;</span>, <span class="ruby-string">&quot;N/A&quot;</span> ]
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">nom</span>, <span class="ruby-node">&quot;#{produit.prix_deposant} €&quot;</span>, <span class="ruby-string">&quot;❌ Non vendu&quot;</span>, <span class="ruby-identifier">produit</span>.<span class="ruby-identifier">date_depot</span>&amp;.<span class="ruby-identifier">strftime</span>(<span class="ruby-string">&quot;%d/%m/%Y&quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-string">&quot;N/A&quot;</span>, <span class="ruby-string">&quot;N/A&quot;</span>, <span class="ruby-string">&quot;N/A&quot;</span> ]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">table</span>(<span class="ruby-identifier">data</span>, <span class="ruby-value">header:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">width:</span> <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">bounds</span>.<span class="ruby-identifier">width</span>) { <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">padding</span> = <span class="ruby-value">5</span> }
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">move_down</span> <span class="ruby-value">20</span>
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">text</span> <span class="ruby-node">&quot;Total des ventes réglées : #{total_lignes} article(s)&quot;</span>, <span class="ruby-value">size:</span> <span class="ruby-value">12</span>
  <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">text</span> <span class="ruby-node">&quot;Total versé à la cliente : #{sprintf(&#39;%.2f&#39;, total_verse)} €&quot;</span>, <span class="ruby-value">size:</span> <span class="ruby-value">12</span>

  <span class="ruby-identifier">send_data</span> <span class="ruby-identifier">pdf</span>.<span class="ruby-identifier">render</span>, <span class="ruby-value">filename:</span> <span class="ruby-node">&quot;recapitulatif_produits_#{@client.id}.pdf&quot;</span>, <span class="ruby-value">type:</span> <span class="ruby-string">&quot;application/pdf&quot;</span>, <span class="ruby-value">disposition:</span> <span class="ruby-string">&quot;inline&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>GET /clients/:id/generate_pdf Génère un fichier PDF avec le récapitulatif des produits en dépôt du client, leur statut et paiements. Utilise la gem Prawn pour la génération du PDF.</p>
        </div>


      </div>

      <div id="method-i-index" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-i-index" title="Link to this method">
                <span class="method-name">index</span>
                <span class="method-args">()</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="index-source">
            <pre><span class="ruby-comment"># File app/controllers/clients_controller.rb, line 11</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">index</span>
  <span class="ruby-ivar">@clients</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">order</span>(<span class="ruby-value">nom:</span> <span class="ruby-value">:asc</span>, <span class="ruby-value">prenom:</span> <span class="ruby-value">:asc</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:query</span>].<span class="ruby-identifier">present?</span>
    <span class="ruby-identifier">search_term</span> = <span class="ruby-node">&quot;%#{params[:query]}%&quot;</span>
    <span class="ruby-ivar">@clients</span> = <span class="ruby-ivar">@clients</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;LOWER(nom) LIKE LOWER(?) OR LOWER(prenom) LIKE LOWER(?) OR telephone LIKE ? OR ancien_id LIKE ?&quot;</span>,
                              <span class="ruby-identifier">search_term</span>, <span class="ruby-identifier">search_term</span>, <span class="ruby-identifier">search_term</span>, <span class="ruby-identifier">search_term</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@pagy</span>, <span class="ruby-ivar">@clients</span> = <span class="ruby-identifier">pagy</span>(<span class="ruby-ivar">@clients</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@clients</span>.<span class="ruby-identifier">any?</span>

  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>GET /clients Affiche la liste des clients triés par nom et prénom. Permet la recherche par nom, prénom, téléphone ou ancien ID. Utilise Pagy pour la pagination si des résultats sont trouvés.</p>
        </div>


      </div>

      <div id="method-i-new" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-i-new" title="Link to this method">
                <span class="method-name">new</span>
                <span class="method-args">()</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File app/controllers/clients_controller.rb, line 36</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">new</span>
  <span class="ruby-ivar">@client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@retour</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:retour</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>GET /clients/new Affiche le formulaire de création d’un nouveau client. Gère un paramètre optionnel :retour pour savoir si le formulaire a été appelé depuis les ventes.</p>
        </div>


      </div>

      <div id="method-i-show" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-i-show" title="Link to this method">
                <span class="method-name">show</span>
                <span class="method-args">()</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="show-source">
            <pre><span class="ruby-comment"># File app/controllers/clients_controller.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">show</span>
  <span class="ruby-ivar">@paiements_en_attente</span> = <span class="ruby-identifier">paiements_en_attente</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>[<span class="ruby-value">:client</span>] <span class="ruby-operator">==</span> <span class="ruby-ivar">@client</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>GET /clients/:id Affiche les informations d’un client ainsi que ses paiements en attente.</p>
        </div>


      </div>

      <div id="method-i-update" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-i-update" title="Link to this method">
                <span class="method-name">update</span>
                <span class="method-args">()</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="update-source">
            <pre><span class="ruby-comment"># File app/controllers/clients_controller.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@client</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">client_params</span>)
    <span class="ruby-identifier">flash</span>[<span class="ruby-value">:notice</span>] = <span class="ruby-string">&quot;Client mis à jour avec succès.&quot;</span>
    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">clients_path</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">flash</span>[<span class="ruby-value">:alert</span>] = <span class="ruby-string">&quot;Erreur lors de la mise à jour du client.&quot;</span>
    <span class="ruby-identifier">render</span> <span class="ruby-value">:edit</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>PATCH/PUT /clients/:id Met à jour les informations d’un client. Redirige vers l’index des clients avec un message de succès ou d’erreur.</p>
        </div>


      </div>

    </section>

  </section>
</main>

